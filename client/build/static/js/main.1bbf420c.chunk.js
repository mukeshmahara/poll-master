(this["webpackJsonppoll-master"]=this["webpackJsonppoll-master"]||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/pollmaster-logo.a3a70aba.svg"},34:function(e,t,n){e.exports=n.p+"static/media/loading.a69fcf6e.gif"},35:function(e,t,n){e.exports=n.p+"static/media/404.6695af99.svg"},37:function(e,t,n){e.exports=n.p+"static/media/PageNotFound.8da3f613.svg"},38:function(e,t,n){e.exports=n(67)},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(30),r=n.n(l),i=n(13),c=n(12),s=(n(43),n(2)),u=n(3),m=n(6),p=n(4),d=n(5),h=n(31),f=n.n(h),v=function(){return o.a.createElement("nav",{className:"navbar navbar-light bg-light"},o.a.createElement(i.c,{to:"/",exact:!0,className:"navbar-brand text-light"},o.a.createElement("img",{src:f.a,alt:"Logo",className:"logo"}),"Poll Master"),o.a.createElement("ul",{className:"navbar-nav ml-auto pr-5"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement(i.c,{to:"/create",className:"nav-link text-light",title:"Create a Poll"},"Create"))),o.a.createElement("form",{className:"form-inline"},o.a.createElement("button",{className:"btn btn-outline-light my-2 my-sm-0 ",type:"submit",title:"Sorry, it's under construction, Sign in Functionality to be added in the future",disabled:!0},"Sign In")))},g=n(11),E=n.n(g),b=function(e){return o.a.createElement("h6",{className:"question"},e.question)},O=n(16),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){n.props.handleVote(n.props.optionId)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.option,n=e.optionId;return o.a.createElement("div",{key:n,className:"option",onClick:this.handleClick},t)}}]),t}(o.a.Component),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleVote=function(e){n.props.toggleLoadVoting();var t=n.props.options.map((function(t){return t._id===e&&t.votes++,t})),a={question:n.props.question,options:t};E.a.post("http://localhost:5500/poll/vote/"+n.props.pollId,a).then((function(e){console.log(e.data),n.props.toggleLoadVoting(),n.props.displayVotingPercentage()}))},n.state={displayBtn:!1},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(){this.setState({displayBtn:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"options"},o.a.createElement("div",null,this.props.options.map((function(t){return o.a.createElement(y,{option:t.option,optionId:t._id,key:t._id,handleVote:e.handleVote})}))))}}]),t}(o.a.Component),j=function(e){var t=e.option,n=e.optionId,a=e.width,l={background:"rgba(38,83,175,0.7)",height:"100%",padding:"0",margin:"0",width:"".concat(a,"%"),position:"absolute"};return o.a.createElement("div",{key:n,className:"voteItem",style:{position:"relative"}},o.a.createElement("div",{style:l}),o.a.createElement("span",{style:{paddingLeft:"0.5rem"}},Number(a.toFixed(2)),"% ",t))},k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).calculateWidth=function(e){return e/n.state.totalVote*100},n.state={options:[],totalVote:0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("http://localhost:5500/poll/"+this.props.pollId).then((function(t){e.setState({options:t.data.options,totalVote:t.data.__v})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"options"},o.a.createElement("div",null,this.state.options.map((function(t){return o.a.createElement(j,{key:t._id,option:t.option,optionId:t._id,votes:t.votes,width:e.calculateWidth(t.votes)})}))),o.a.createElement("div",null,o.a.createElement("small",{className:"text-secondary votedinfo"},this.state.totalVote," votes")))}}]),t}(o.a.Component),x=n(34),C=n.n(x),S=function(){return o.a.createElement("div",{className:"options loadingComp"},o.a.createElement("img",{src:C.a,className:"loadingGIF",alt:"loading..."}),o.a.createElement("em",null,"Voting in progress"))},w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).displayVotingPercentage=function(){n.setState({voted:!0})},n.toggleLoadVoting=function(){n.setState((function(e){return{loading:!e.loading}}))},n.state={voted:!1,loading:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"col-12 col-sm-6 col-md-4  containerBox mb-4 d-flex justify-content-center align-item-stretch"},o.a.createElement("div",{className:"container border text-center p-2"},o.a.createElement(b,{question:this.props.question}),o.a.createElement("hr",null),this.state.loading?o.a.createElement(S,null):this.state.voted?o.a.createElement(k,{pollId:this.props.id}):o.a.createElement(N,{pollId:this.props.id,options:this.props.options,question:this.props.question,displayVotingPercentage:this.displayVotingPercentage,toggleLoadVoting:this.toggleLoadVoting})))}}]),t}(o.a.Component),P=n(35),q=n.n(P),V=function(){return o.a.createElement("div",{className:"m-auto"},o.a.createElement("span",{className:" d-flex justify-content-center"},o.a.createElement("img",{src:q.a,alt:"screen Cleaning",className:"error404"})),o.a.createElement("p",{className:"loadingTxt text-center"},o.a.createElement("em",null,"OOPS! No Polls Found. ",o.a.createElement("br",null),"Sorry!")))},I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={polls:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("http://localhost:5500/poll/").then((function(t){e.setState({polls:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"ContainerSec"},o.a.createElement("div",{className:"text-center pt-3"},o.a.createElement("h1",{className:"heading"},"Polls")),o.a.createElement("hr",null),o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},0===this.state.polls.length?o.a.createElement(V,null):this.state.polls.map((function(e){return o.a.createElement(w,{key:e._id,id:e._id,question:e.question,options:e.options})})))))}}]),t}(o.a.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container-fluid"},o.a.createElement(v,null),o.a.createElement(I,null))}}]),t}(o.a.Component),A=n(36);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleQuestionInput=function(e){n.setState({question:e.target.value})},n.handleOptionInput=function(e){return function(t){var a=n.state.options.map((function(n,a){return e!==a?n:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(A.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{option:t.target.value})}));n.setState({options:a})}},n.handleAddOption=function(){n.setState({options:n.state.options.concat([{option:"",votes:0}])})},n.handleRemoveOption=function(e){return function(){console.log(n.state.options.length),n.state.options.length>=3?n.setState({options:n.state.options.filter((function(t,n){return e!==n}))}):(n.setState({error:"You need atleast Two Options for the poll"}),setTimeout((function(){n.setState({error:""})}),5e3))}},n.onSubmit=function(e){e.preventDefault();var t={question:n.state.question,options:n.state.options};E.a.post("http://localhost:5500/poll/add",t).then((function(e){return console.log(e.data)})),console.log(t),window.location="/"},n.state={question:"",options:[{option:"",votes:0},{option:"",votes:0},{option:"",votes:0}],error:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container-fluid"},o.a.createElement(v,null),o.a.createElement("div",{className:"ContainerSec px-5 py-4"},o.a.createElement("h1",{className:"text-center heading"},"Create A Poll"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"pollQuestion",className:"heading"},"Question:"),o.a.createElement("input",{type:"text",className:"form-control",name:"question",id:"pollQuestion",value:this.state.question,onChange:this.handleQuestionInput,placeholder:"Enter your Poll Question",required:!0})),o.a.createElement("div",null,o.a.createElement("label",{className:"heading"},"Options:"),this.state.options.map((function(t,n){return o.a.createElement("div",{key:n,className:"form-inline mx-sm-3 mb-2"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Option #".concat(n+1),value:t.name,onChange:e.handleOptionInput(n),required:!0}),o.a.createElement("button",{type:"button",onClick:e.handleRemoveOption(n),className:"fonticons text-danger"},o.a.createElement("i",{class:"fas fa-minus-circle"})))})),o.a.createElement("button",{type:"button",onClick:this.handleAddOption,className:"btn btn-link text-decoration-none"},o.a.createElement("i",{className:"fas fa-plus-circle"})," Add Option"),this.state.error?o.a.createElement("div",{className:"alert alert-danger"},this.state.error):""),o.a.createElement("input",{className:"btn btn-primary mt-4",type:"submit",value:"Add Poll"}))))}}]),t}(a.Component),F=n(37),Q=n.n(F),T=function(){return o.a.createElement("div",null,o.a.createElement(v,null),o.a.createElement("div",null,o.a.createElement("h1",{className:"text-center mt-4 heading mb-3"},"Error 404")),o.a.createElement("div",{className:"m-auto"},o.a.createElement("span",{className:" d-flex justify-content-center"},o.a.createElement("img",{src:Q.a,alt:"screen Cleaning",className:"error404"})),o.a.createElement("p",{className:"loadingTxt text-center mt-3"},o.a.createElement("em",null,"This is not the page you are looking for.")),o.a.createElement("p",{className:"loadingTxt text-center mt-3"},o.a.createElement("em",null,"Go back ",o.a.createElement(i.b,{to:"/"},"home")))))};n(66);var B=function(){return o.a.createElement(i.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(c.c,null,o.a.createElement(c.a,{path:"/",exact:!0,component:_}),o.a.createElement(c.a,{path:"/create",exact:!0,component:L}),o.a.createElement(c.a,{component:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.1bbf420c.chunk.js.map